// Copyright (c). Gem Wallet. All rights reserved.

import Testing
import Gemstone
import PrimitivesTestKit
import Primitives

@testable import GemstonePrimitives

final class ExplorerServiceTests {

    @Test
    func testExplorerService() {
        let service = ExplorerService(storage: MockExplorerStorage())
        let chain = Chain.bitcoin
        let hash = "f9c7f0f5d34ad038cdb097902ea66a53f53bd34709569fd9a02b761288470ee2"

        #expect(service.transactionUrl(chain: chain, hash: hash).name == "Blockchair")
        #expect(service.transactionUrl(chain: chain, hash: hash).link == "https://blockchair.com/bitcoin/transaction/\(hash)")
        //TODO:
        //expect(service.transactionUrl(chain: .bitcoin, hash: hash).link == "https://blockchair.com/bitcoin/transaction/\(hash)?from=gemwallet")
        service.set(chain: chain, name: "Mempool")
        #expect(service.transactionUrl(chain: chain, hash: hash).name == "Mempool")
    }
}
